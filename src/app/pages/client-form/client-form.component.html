<div class="container clients-page">
  <div class="sidebar-container">
    <div class="header-logo">
      <div class="header-logo">
        <app-logo></app-logo>
      </div>
    </div>
    <app-menu></app-menu>
  </div>
  <main class="main-container">
    <app-header></app-header>
    <div class="main-content">
      <div class="main-content__heading">
        <h1>
          <button type="button" class="btn-clear btn-in-heading" (click)="onNavigateClients()">Clients</button>
          <span>{{ isNew ? 'New Client' : clientData.name }}</span>
        </h1>
      </div>
      <div class="content__form">
        <form #clientForm="ngForm" (ngSubmit)="onSubmit(clientForm.value)">
          <div class="content__form--heading">Client Information</div>
          <div class="content__form--fields client__form--fields">
            <div class="content__form--field client__form--field">
              <div class="form__field is-required">
                <label for="clientNameFld">Name</label>
                <input type="text"
                       name="clientName"
                       placeholder="Name"
                       #clientNameVariable="ngModel"
                       [(ngModel)]="clientData.name"
                       id="clientNameFld"
                       autocomplete="off"
                       required
                       minlength="3">
                <div *ngIf="clientNameVariable.errors&&(clientNameVariable.dirty||clientNameVariable.touched)"
                     class="field__errors client__errors">
                  <div [hidden]="!clientNameVariable.errors.required">
                    Name is required
                  </div>
                  <div [hidden]="!clientNameVariable.errors.minlength">
                    Name must be at least 4 characters.
                  </div>
                </div>
              </div>
            </div>

            <div class="content__form--field client__form--field">
              <div class="form__field is-required">
                <label for="clientEmailFld">Email</label>
                <input type="email"
                       #clientEmailVariable="ngModel"
                       required
                       name="clientEmail"
                       placeholder="Email"
                       id="clientEmailFld"
                       autocomplete="off"
                       pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$"
                       [(ngModel)]="clientData.email">
                <div *ngIf="clientEmailVariable.errors && (clientEmailVariable.dirty || clientEmailVariable.touched)"
                     class="field__errors client__errors">
                  <div [hidden]="!clientEmailVariable.errors.required">
                    Email Address is required
                  </div>
                  <div [hidden]="!clientEmailVariable.errors.pattern">
                    Invalid email address
                  </div>
                </div>
              </div>
            </div>

            <div class="content__form--field client__form--field">
              <div class="form__field is-required">
                <label for="clientPhoneFld">Phone</label>
                <input type="text"
                       #clientPhoneVariable="ngModel"
                       required
                       name="clientPhone"
                       placeholder="Phone"
                       id="clientPhoneFld"
                       autocomplete="off"
                       [(ngModel)]="clientData.phone">
                <div *ngIf="clientPhoneVariable.errors && (clientPhoneVariable.dirty || clientPhoneVariable.touched)"
                     class="field__errors client__errors">
                  <div [hidden]="!clientPhoneVariable.errors.required">
                    Phone Number is required
                  </div>
                </div>
              </div>
            </div>

            <div class="content__form--field client__form--field">
              <div class="form__field is-required">
                <label for="clientAddressFld">Street Address</label>
                <input type="text"
                       #clientAddressVariable="ngModel"
                       [(ngModel)]="clientData.address"
                       required
                       name="clientAddress"
                       placeholder="Address"
                       id="clientAddressFld">
                <div
                  *ngIf="clientAddressVariable.errors && (clientAddressVariable.dirty || clientAddressVariable.touched)"
                  class="field__errors client__errors">
                  <div [hidden]="!clientAddressVariable.errors.required">
                    Address is required
                  </div>
                </div>
              </div>
            </div>

            <div class="content__form--field client__form--field">
              <div class="form__field is-required">
                <label for="clientCityFld">City</label>
                <input type="text"
                       #clientCityVariable="ngModel"
                       [(ngModel)]="clientData.city"
                       required
                       name="clientCity"
                       placeholder="City"
                       id="clientCityFld">
                <div *ngIf="clientCityVariable.errors && (clientCityVariable.dirty || clientCityVariable.touched)"
                     class="field__errors client__errors">
                  <div [hidden]="!clientCityVariable.errors.required">
                    City is required
                  </div>
                </div>
              </div>
            </div>

            <div class="content__form--field client__form--field">
              <div class="form__field is-required">
                <label for="clientStateFld">State</label>
                <input type="text"
                       #clientStateVariable="ngModel"
                       [(ngModel)]="clientData.state"
                       required
                       name="clientState"
                       placeholder="State"
                       id="clientStateFld">
                <div *ngIf="clientStateVariable.errors && (clientStateVariable.dirty || clientStateVariable.touched)"
                     class="field__errors client__errors">
                  <div [hidden]="!clientStateVariable.errors.required">
                    State is required
                  </div>
                </div>
              </div>
            </div>

            <!-- TODO: Maybe merge state and postal fields to one column? -->
            <div class="content__form--field client__form--field">
              <div class="form__field is-required">
                <label for="clientPostalFld">Postal Code</label>
                <input type="text"
                       #clientPostalVariable="ngModel"
                       [(ngModel)]="clientData.postalCode"
                       required
                       name="clientPostal"
                       placeholder="Postal Code"
                       id="clientPostalFld">
                <div
                  *ngIf="clientPostalVariable.errors && (clientPostalVariable.dirty || clientPostalVariable.touched)"
                  class="field__errors client__errors">
                  <div [hidden]="!clientPostalVariable.errors.required">
                    Postal Code is required
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="content__form--action-buttons client__form--action-buttons">
            <button class="btn" [disabled]="!clientForm.valid">{{ isNew ? 'Create Client' : 'Update Client' }}</button>
            <button class="btn-clear btn-delete" *ngIf="!isNew">Delete Client</button>
          </div>
        </form>
      </div>
    </div>
  </main>
</div>


